<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.1">Jekyll</generator><link href="https://wermos.github.io//blog/feed.xml" rel="self" type="application/atom+xml" /><link href="https://wermos.github.io//blog/" rel="alternate" type="text/html" /><updated>2022-11-02T09:43:10+00:00</updated><id>https://wermos.github.io//blog/feed.xml</id><title type="html">Tirthankar’s Blog</title><subtitle>A blog about C++, math, anime, games, and more.</subtitle><author><name>Tirthankar Mazumder</name><email>mztirthankar@gmail.com</email></author><entry><title type="html">A Small Detail in Naruto Shippuuden: Sealing Jutsu</title><link href="https://wermos.github.io//blog/anime/naruto/naruto-detail/" rel="alternate" type="text/html" title="A Small Detail in Naruto Shippuuden: Sealing Jutsu" /><published>2022-09-15T10:30:35+00:00</published><updated>2022-09-15T10:30:35+00:00</updated><id>https://wermos.github.io//blog/anime/naruto/naruto-detail</id><content type="html" xml:base="https://wermos.github.io//blog/anime/naruto/naruto-detail/"><![CDATA[<p>This post is about a small detail I noticed while telling someone about an amazing scene in the show.</p>

<blockquote>
  <p><strong>Warning:</strong>
Spoilers ahead. If you are still watching Naruto Shippuuden, and are at an episode before <strong>episode 250</strong>, skip this blog post.</p>
</blockquote>

<h1 id="the-detail">The Detail</h1>

<p>Whenever anyone in the show performs a Jutsu that results in seal marks being created, they always do it on the ground, and the marks always show up on the ground, or somewhere with a hard surface. The one exception to this rule is Minato Namikaze. His extensive knowledge of Sealing Jutsu allows him to use Jutsu that result in seal marks anywhere (including doing them in the air), and the resultant marks show up in the air.</p>

<p>If you’re wondering where I got this theory from, or why I think it’s true, keep reading!</p>

<h1 id="narutos-parents">Naruto’s Parents</h1>

<p>We know that Naruto’s parents are Minato Namikaze, of the Namikaze clan, and Kushina Uzumaki, of the Uzumaki clan. When Naruto is trying to tame the nine-tailed fox and he meets his mother, we get to see the whole backstory about the infamous attack on the Hidden Leaf Village 16 years ago.</p>

<p>One of the things Kushina mentions is that the Uzumaki clan was known for their deep knowledge of Sealing Jutsu. She goes on say that Minato spent time with her mother and learned many things about Sealing Jutsu.</p>

<h1 id="summoning-jutsu">Summoning Jutsu</h1>

<p>An important class of jutsus in the show are the <em>Summoning Jutsu</em>. As you may recall, these are jutsus used to summon animals, usually for fighting purposes.</p>

<h2 id="an-aside-uses-of-summoned-animals">An Aside: Uses of Summoned Animals</h2>

<p>Not everyone uses the summoned animals for fighting. Jiraiya and Naruto both use their signature summons, toads, for fighting purposes. However, Tsunade and Sakura use their signature summons, the slug (Katsuyu), for healing purposes. Moreover, Kakashi’s summon brings out dogs, which have zero fighting power (against the enemies in the Naruto-verse), and are used for tracking purposes.</p>

<h2 id="so-what-about-these-summons">So What About These Summons?</h2>

<p>One thing you will notice is that whenever people use a summoning jutsu, the summon results in some seal marks being written on the ground:</p>
<div style="position:relative; padding-bottom:calc(76.67% + 44px)"><iframe src="https://gfycat.com/ifr/search/AnimatedFewAnhinga?controls=0&amp;hd=1" frameborder="0" scrolling="no" width="100%" height="100%" style="position:absolute;top:0;left:0;" allowfullscreen=""></iframe></div>
<p><br />
This little detail stays constant throughout: the marks show up when the Legendary Sannin do a Summoning Jutsu, when Tobi summons the nine tails, and also when Pain does his (their?) summons.</p>

<p>That is to say, the marks are not a result of a “skill issue”. They show up regardless of who is performing the summon.</p>

<h2 id="minato-vs-nine-tailed-fox">Minato vs. Nine-Tailed Fox</h2>

<p>Think back to when Minato fought the nine tails, and it unleashed a Tailed Beast Bomb at him. What did he do? Since a picture is worth a thousand words, I won’t describe it, but rather show it:</p>
<div style="position:relative; padding-bottom:calc(56.25% + 44px)"><iframe src="https://gfycat.com/ifr/search/SpryWeightyGoosefish?controls=0&amp;hd=1" frameborder="0" scrolling="no" width="100%" height="100%" style="position:absolute;top:0;left:0;" allowfullscreen=""></iframe></div>
<p><br />
The key thing to note is that the seal marks are being written and drawn in the air itself. <em>In the air</em>. No other ninja in the show ever achieves a similar feat.</p>

<h2 id="how-does-minato-know-how-to-do-it">How Does Minato Know How To Do It?</h2>

<p>Well, it was established before that Minato spent time around his wife’s clan, the Uzumakis, and learned their craft. It would appear that he used the knowledge he learned extensively.</p>

<h3 id="where-else">Where Else?</h3>

<p>It would be natural to wonder where else he is shown to be using his Sealing Jutsu skills in the show. Here is a small list of the other places where he used them, or his skill with Sealing Jutsu are indirectly demonstrated:</p>

<ol>
  <li>
    <p>He put his teleporation mark into Kushina’s Jinchuriki seal so that he could teleport to her directly if she was ever in danger.</p>
  </li>
  <li>
    <p>He unsealed the nine tails from Tobi, freeing it from the Sharingan’s hynoptic gaze, and making it free to be sealed inside a Jinchuriki again.</p>
  </li>
  <li>
    <p>When he seals the nine tails into Naruto, he makes sure to mix a bit of his and Kushina’s chakra into the seal so that they can appear in his mind at crucial moments and guide him away from the dark path he was going down.</p>
  </li>
  <li>
    <p>When Naruto meets Kushina, she explains to him that the Tetragram Seal on his abdomen is a seal modeled after jutsu from Uzushiogakure, which is the village where the Uzumaki clan lived.</p>
  </li>
  <li>
    <p>The seal written on Gerotora is Naruto’s Jinchuriki Seal. The visual we are shown in the anime (and the manga too!) is testament to the sheer complexity of the seal that Minato used. None other than a person highly skilled in the art of Sealing Jutsu could have created such a seal.</p>
  </li>
  <li>
    <p>Apart from the sheer complexity of Naruto’s seal, we also have to remember that Minato came up with the seal under duress (the village was being attacked). This little detail also indirectly shows Minato’s skill with Sealing Jutsu.</p>
  </li>
</ol>

<h2 id="but-wait">But Wait!</h2>

<p>An astute reader/viewer of the series might object to this post by saying that this theory does not hold up against the first time that Naruto summons Gamabunta.</p>

<p>There are two aspects to this objection: First of all, this is a very good point. Naruto was falling into the canyon, so if he succeeded in performing the summoning (which he did), the seal marks would have to have been drawn in the air. One other possibility is that the seal marks were drawn on the ground and Gamabunta ended up being summoned on the ground. After that, he jumped up and caught Naruto in mid-air.</p>

<p>If one watches that episode again, they will notice that there is no evidence that supports either theory over the other. <em>However</em>, the manga has a very interesting visual, wherein no seal marks are drawn at all.</p>

<p><img src="/blog/assets/images/naruto-summoning.png" alt="Naruto performing the Summoning Jutsu for the first time" /></p>

<p>Hence, both the anime adaptation as well as the source material are inconclusive on this topic. That is, it doesn’t prove nor disprove my theory. However, my explanation for this is that because he tapped into his nine-tails chakra in order to summon Gamabunta, so the normal rules don’t apply.</p>

<p>As a final note, recall that Naruto was inside the sand coffin when he summoned Gamabunta in the fight against Gaara, so that instance does nothing to help or hurt this theory either.</p>]]></content><author><name>Tirthankar Mazumder</name><email>mztirthankar@gmail.com</email></author><category term="anime" /><category term="naruto" /><summary type="html"><![CDATA[This post is about a small detail I noticed while telling someone about an amazing scene in the show.]]></summary></entry><entry><title type="html">GSoC — The Work So Far</title><link href="https://wermos.github.io//blog/gsoc/gsoc-the-work-so-far/" rel="alternate" type="text/html" title="GSoC — The Work So Far" /><published>2022-08-31T10:46:37+00:00</published><updated>2022-08-31T10:46:37+00:00</updated><id>https://wermos.github.io//blog/gsoc/gsoc-the-work-so-far</id><content type="html" xml:base="https://wermos.github.io//blog/gsoc/gsoc-the-work-so-far/"><![CDATA[<p>In this blog post, I will discuss the work I have done so far, and what our future direction will be.</p>

<h1 id="fast-55">Fast 5×5</h1>

<p>In 2019, Hadrien worked with a Masters student to create <a href="https://gitlab.in2p3.fr/CodeursIntensifs/Fast5x5">Fast 5×5</a>, which was supposed to be a proof-of-concept demonstrating that the existing matrix routines in <code>Eigen</code> could be better optimized for small dimensions like 5×5.</p>

<h2 id="my-changes-to-fast-55">My Changes to Fast 5×5</h2>

<p>The first thing my mentors recommended doing was to take a closer look at the repository and understand where we stand with respect to the work to be done.</p>

<p>After looking at <code>fast5x5.hpp</code> for a while, I decided that I should make some changes to make the benchmarking program faster and more reliable. So, I started making changes to the repository. I started off by removing the Docker stuff because I am not too familiar with it, and because it would not be necessary for the project.</p>

<p>After making a few changes, it became apparent that I needed somewhere to push my changes to, so that it was available for everyone to see and use. However, because the original project was on Gitlab, I could not fork it the way projects on GitHub can be forked. Instead, I pushed my copy of the Gitlab repository onto GitHub, and made sure to point to the original URL in my repository description. The original repository can be found <a href="https://gitlab.in2p3.fr/CodeursIntensifs/Fast5x5">here</a>, and my fork can be found <a href="https://github.com/wermos/Fast5x5/">here</a>.</p>

<h3 id="installed-vs-vendored-libraries">Installed vs. Vendored Libraries</h3>

<p>Originally, the repository expected the user to have <code>Eigen</code> and <code>xsimd</code> installed. However, the existing <code>CMakeLists.txt</code> file downloaded Google Test from GitHub, thereby avoiding that library dependency.</p>

<p>In order to minimize library dependencies and make it easier for other people to run the benchmarks, I removed the reliance on user installations and opted to “vendor” the libraries along with the project. Even though both Fast5×5 and <code>algebra-plugins</code> both used CMake to download dependencies from GitHub, I chose the Git submodule approach because I was more familiar with the latter at the time. I added <code>Eigen</code>, <code>xsimd</code>, and GoogleTest as Git sumbodules. Furthermore, all subsequent additions (like Google Benchmark, <code>blaze</code>, and <code>Fastor</code>) were added as submodules to Fast5×5.</p>

<h3 id="usrbintime-vs-google-benchmark"><code>/usr/bin/time</code> vs. Google Benchmark</h3>

<p>[[ start writing here. finish the /usr/bin/time vs google benchmark thing first. ]]</p>

<p>the benchmarking script used <code>/usr/bin/time</code> to time the code. However, since the code that is being benchmarked runs very fast, a dedicated library like <a href="https://github.com/google/benchmark">Google Benchmark</a>.</p>

<h3 id="matrix-generation">Matrix Generation</h3>

<p>A key part of the benchmarking code is the random matrix generation. Doing this properly is essential because otherwise, the compiler might figure out the fact that we have pre-computed matrices. Once it does so, it is free to calculate the results ahead of time, which would defeat the point of the benchmark. The original Fast 5×5 code was using index-based operations to fill up the matrix, like so:</p>

<figure class="highlight"><pre><code class="language-cpp">float a[SIZE * SIZE];
float b[SIZE * SIZE];

// the BaseMatrix data type in fast5x5.hpp has a constructor
// that takes in C-style arrays. So, the code simply filled
// up two arrays and then made two BaseMatrix objects out
// of them.

for (int i = 0; i &lt; SIZE; i++) {
    for (int j = 0; j &lt; SIZE; j++) {
        a[i * SIZE + j] = i + j;
    }
}

for (int i = 0; i &lt; SIZE; i++) {
    for (int j = 0; j &lt; SIZE; j++) {
        float val;
        if (i == 0 &amp;&amp; j == 1) val = -1;
        else if (i == 1 &amp;&amp; j == 0) val = 1;
        else if (i &gt; 1 &amp;&amp; i == j &amp;&amp; i % 2) val = -1;
        else if (i &gt; 1 &amp;&amp; i == j &amp;&amp; !(i % 2)) val = 1;
        else val = 0;
        b[i * SIZE + j] = val;
    }
}</code></pre></figure>

<p>I rewrote the matrix generation code using the random number generators in the <code>&lt;random&gt;</code> header, and mimicked <code>Eigen</code>’s <code>Random()</code> implementation, which generates a random float in the range [-1, 1]:</p>

<figure class="highlight"><pre><code class="language-cpp">// random.hpp
#include &lt;random&gt;
#include &lt;limits&gt;

inline float randomFloat(float min, float max) {
    // Returns a random real in [min, max].
    static std::uniform_real_distribution&lt;float&gt; distribution(
        min, std::nextafter(max,
            std::numeric_limits&lt;float&gt;::infinity()
            )
        );

    static std::mt19937_64 generator;

    return distribution(generator);
}

// this is the matrix generation code
float a[SIZE * SIZE];

for (int i = 0; i &lt; SIZE; i++) {
    for (int j = 0; j &lt; SIZE; j++) {
        a[i * SIZE + j] = randomFloat(-1.0, 1.0);
    }
}</code></pre></figure>]]></content><author><name>Tirthankar Mazumder</name><email>mztirthankar@gmail.com</email></author><category term="gsoc" /><summary type="html"><![CDATA[In this blog post, I will discuss the work I have done so far, and what our future direction will be.]]></summary></entry><entry><title type="html">GSoC — The Details of My Project</title><link href="https://wermos.github.io//blog/gsoc/gsoc-the-details-of-my-project/" rel="alternate" type="text/html" title="GSoC — The Details of My Project" /><published>2022-08-30T11:19:29+00:00</published><updated>2022-08-30T11:19:29+00:00</updated><id>https://wermos.github.io//blog/gsoc/gsoc-the-details-of-my-project</id><content type="html" xml:base="https://wermos.github.io//blog/gsoc/gsoc-the-details-of-my-project/"><![CDATA[<p>In this post, I will discuss what exactly my work is, and how it ties in to the ACTS project. I will also talk about my mentors and what it was like to work with them.</p>

<h1 id="project-description">Project Description</h1>

<p>The original project description was:</p>
<blockquote>
  <p>We propose the development of a linear algebra plugin for ACTS, which makes use of explicit vectorization.</p>

  <ul>
    <li>Port a similar existing library implementation (<a href="https://gitlab.in2p3.fr/CodeursIntensifs/Fast5x5/">fast5x5</a>/<a href="https://github.com/xtensor-stack/xsimd">xsimd</a>) to a suitable library backend (can be decided upon together with the student).</li>
    <li>Adapt the implementation to the linear algebra operations needed in the ACTS numerical integration for particle propagation.</li>
    <li>Validate the approach and its performance and possibly optimize the performance further.</li>
    <li>Given enough time, find a way to make the implementation available to ACTS as a compute backend and run it in ACTS example code.</li>
  </ul>
</blockquote>

<p>The project, as described on the CERN-HSF webpage, can be found <a href="https://hepsoftwarefoundation.org/gsoc/2022/proposal_Acts-vectorized-LA-backend.html">here</a>.</p>

<h2 id="alternate-project-description">Alternate Project Description</h2>

<p>The above description might be a little terse for some. This is the way I like to explain it to others:</p>

<p>CERN generates a lot of data from its LHC experiments. For this reason, they have a lot of software projects which are data analysis oriented. The ACTS project is one such software package which does track reconstruction.</p>

<p>However, the people who work on the ACTS project noticed that the matrix libraries they were using were quite slow for small dimensions (like 4×4, 6×6, 6×8, and 8×8). Upon further investigation, it turned out that popular matrix libraries like <code>Eigen</code> and <code>SMatrix</code> are not well-optimized for these dimensions.</p>

<p>Some time ago, an alternate implementation of 4×4 matrices and the related operations were written using a library called <a href="https://github.com/VcDevel/Vc"><code>Vc</code></a>, and it performed quite well in benchmarks at the time.</p>

<p>My work is to continue this work and write implemenations for all these desired dimensions, so that the ACTS project’s routines run faster.</p>

<p>I will go more into the details of the work and what we have accomplished so far in the next blog post. For now, I will discuss a bit about our weekly meeting schedule, and what it is like to work with my mentors.</p>

<h3 id="my-project-proposal">My Project Proposal</h3>

<p>My proposal can be found <a href="https://docs.google.com/document/d/1Ick3iDF_2bGbLiR-ZDGWnk06rrP64JBQG8Et4TccxRs/edit?usp=sharing">here</a>. The only change I suggested was to use <code>xsimd</code> instead of <code>Vc</code>, because the latter is not in active development anymore.</p>

<h2 id="where-would-the-work-go">Where Would The Work Go?</h2>

<p>The math code in the <a href="https://github.com/acts-project/acts">ACTS Project</a> proper is inextricably linked with the track-fitting code, so it would be a lot of work to change that.</p>

<p>However, in the <a href="https://github.com/acts-project">ACTS project family</a>, there are two research repositories: <a href="https://github.com/acts-project/detray">detray</a> and <a href="https://github.com/acts-project/traccc">traccc</a>. These two repositories were started a couple of years after the original ACTS Project, so their approach to the math code is also slightly different. Both of these projects use another ACTS family project called <a href="https://github.com/acts-project/algebra-plugins"><code>algebra-plugins</code></a> as a layer of abstraction over the different functions that matrix libraries like <code>Eigen</code> and <code>SMatrix</code> provide. This allows the developers of these research repositories to easily switch between math backends and test them out.</p>

<p>My work involves fleshing out the <a href="https://github.com/acts-project/algebra-plugins/tree/71ea1e814fae3020feedf6389c89a4ffac591bae/math/vc"><code>Vc</code> portion</a> of <code>algebra-plugins</code>, and adding all the functions which are present in the other math backends but not in the <code>Vc</code> stuff yet.</p>

<h1 id="weekly-meeting-schedule">Weekly Meeting Schedule</h1>

<p>We usually meet on Mondays at 10:00 am CEST (1:30 pm IST). Sometimes, we meet on other days, if the day is a holiday in some country, or one of us has other commitments.</p>

<h1 id="mentors">Mentors</h1>

<p>I have the pleasure of working with 3 highly qualified mentors. I will write a bit about each person:</p>

<h2 id="joana-nierman">Joana Nierman</h2>

<p>She is currently a PhD student in the <a href="https://www.uni-goettingen.de/en/1.html">University of Göttingen</a>.</p>

<p>She was the first person I contacted, about my interest in working on this project for GSoC, so we have been corresponding since late March of this year. She is quite helpful in general. In our weekly meets, she regularly helps us set the direction for the week, and also helps with gathering more data by running the benchmarks I have written on other machines.</p>

<h2 id="hadrien-grasland">Hadrien Grasland</h2>

<p>Hadrien is a software engineer who works for the <a href="https://www.cnrs.fr/en">Centre National de la Recherche Scientifique</a> (CNRS).</p>

<p>His knowledge of the nitty-gritty details of computer architecture and SIMD instruction sets is unparalleled. I am highly grateful to work with him, and I have learned a lot by working on this project with him, and discussing the assembly outputs of the different benchmarks I have written.</p>

<p>In the early stages of the project, he was quite supportive of me adding other matrix library backends to our benchmarks, and seeing how they perform in comparison with Eigen and Fast 5×5.</p>

<h2 id="paul-gessinger-befurt">Paul Gessinger-Befurt</h2>

<p>He is the person who knows the most about ACTS project out of all three mentors. When we have any questions about anything related to the ACTS project, he is the person who helps us out.</p>

<p>That’s all for this blog post! In the next one, I will discuss our results so far in detail, and what we plan on doing next.</p>]]></content><author><name>Tirthankar Mazumder</name><email>mztirthankar@gmail.com</email></author><category term="gsoc" /><summary type="html"><![CDATA[In this post, I will discuss what exactly my work is, and how it ties in to the ACTS project. I will also talk about my mentors and what it was like to work with them.]]></summary></entry><entry><title type="html">GSoC — First Blog Post</title><link href="https://wermos.github.io//blog/gsoc/gsoc-first-blog-post/" rel="alternate" type="text/html" title="GSoC — First Blog Post" /><published>2022-08-28T21:24:55+00:00</published><updated>2022-08-28T21:24:55+00:00</updated><id>https://wermos.github.io//blog/gsoc/gsoc-first-blog-post</id><content type="html" xml:base="https://wermos.github.io//blog/gsoc/gsoc-first-blog-post/"><![CDATA[<p>This is my first GSoC blog post, where I talk about what GSoC is, what organization I am working with, and what the software project I am working on actually does.</p>

<h1 id="what-is-gsoc">What is GSoC?</h1>

<p>GSoC is short for Google Summer of Code. Here is a quote from the official webpage, which explains the entire thing pretty well:</p>
<blockquote>
  <p>Google Summer of Code is a global, online program focused on bringing new contributors into open source software development. GSoC Contributors work with an open source organization on a 12+ week programming project under the guidance of mentors.</p>
</blockquote>

<p>For more information, check out their <a href="https://summerofcode.withgoogle.com/">webpage</a>.</p>

<h1 id="my-gsoc-project">My GSoC Project</h1>

<h2 id="my-organization">My Organization</h2>

<p>In GSoC, there are Contributors and Organizations. The Contributors are individuals like myself who will work on some project, and the Organizations are the people who want these projects to be done.</p>

<p>This year, I was selected to work with <a href="https://summerofcode.withgoogle.com/programs/2022/organizations/cern-hsf">CERN-HSF</a>, and my project falls under the purview of the <a href="https://github.com/acts-project/acts">ACTS Project</a>.</p>

<h2 id="what-is-the-acts-project">What is the ACTS Project?</h2>

<p>If we take a look at the <a href="https://github.com/acts-project/acts/blob/main/README.md">README.md</a>, we see that</p>
<blockquote>
  <p>Acts is an experiment-independent toolkit for (charged) particle track reconstruction in (high energy) physics experiments implemented in modern C++.</p>
</blockquote>

<h3 id="but-what-does-that-mean">But What Does That Mean?</h3>

<p>When CERN conducts experiments at the <a href="https://home.cern/science/accelerators/large-hadron-collider">Large Hadron Collider</a> (LHC), the 8 detectors present record certain types of data. The ACTS project is only concerned with the data gathered by the <a href="https://atlas.cern/">ATLAS detector</a>.</p>

<figure>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/7/74/LHC.svg" alt="diagram of the LHC and the 8 detectors" /></p>
  <figcaption>A diagram of the LHC and the 8 detectors. Picture Credits: <a href="https://en.wikipedia.org/wiki/Large_Hadron_Collider#/media/File:LHC.svg">Wikipedia</a></figcaption>
</figure>

<h3 id="what-is-track-reconstruction">What is Track Reconstruction?</h3>

<p>One of things mentioned in the ACTS project’s README is <a href="https://en.wikipedia.org/wiki/Tracking_(particle_physics)">track reconstruction</a>. This consists of two parts: First, when a particle interacts with a certain detector geometry, the detector records it for further analysis. Then, the software takes all the gathered points where the particle was known to be at, and recreates the path that the particle must have taken.</p>

<h3 id="how-is-this-done">How Is This Done?</h3>

<p>One thing to keep in mind is that in the real world, we do not (and cannot) have a perfect knowledge of the exact location the particle hit a detector geometry. What we actually have is a location and an error bound, and the software has to take this error bound into account as well.</p>

<p>One of the ways to do this kind of track fitting, is to make use of a statistical technique known as <a href="https://en.wikipedia.org/wiki/Kalman_filter">Kalman Filtering</a>.</p>

<p>In the next blog post, I will explain what my work is, and how all this ties into my GSoC project.</p>]]></content><author><name>Tirthankar Mazumder</name><email>mztirthankar@gmail.com</email></author><category term="gsoc" /><summary type="html"><![CDATA[This is my first GSoC blog post, where I talk about what GSoC is, what organization I am working with, and what the software project I am working on actually does.]]></summary></entry></feed>